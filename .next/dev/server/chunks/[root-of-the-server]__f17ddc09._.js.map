{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/Personal%20Expense%20Analyzer/src/lib/db.js"],"sourcesContent":["import { Pool } from 'pg';\r\n\r\nlet pool;\r\n\r\nconst config = process.env.DATABASE_URL\r\n    ? {\r\n        connectionString: process.env.DATABASE_URL,\r\n        ssl: {\r\n            rejectUnauthorized: false, // For some cloud providers\r\n        },\r\n    }\r\n    : {\r\n        user: process.env.DB_USER || 'postgres',\r\n        host: process.env.DB_HOST || 'localhost',\r\n        database: process.env.DB_NAME || 'expense_tracker',\r\n        password: process.env.DB_PASSWORD || 'password',\r\n        port: process.env.DB_PORT || 5432,\r\n    };\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  pool = new Pool(config);\r\n} else {\r\n  // In development mode, stick the pool in a global variable\r\n  // so we don't restart it every time the module reloads.\r\n  if (!global.pool) {\r\n    console.log('[DB] Initializing new pool (dev)');\r\n    global.pool = new Pool(config);\r\n  }\r\n  pool = global.pool;\r\n}\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,IAAI;AAEJ,MAAM,SAAS,QAAQ,GAAG,CAAC,YAAY,GACjC;IACE,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK;QACD,oBAAoB;IACxB;AACJ,IACE;IACE,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;AACjC;AAEJ;;KAEO;IACL,2DAA2D;IAC3D,wDAAwD;IACxD,IAAI,CAAC,yDAAO,IAAI,EAAE;QAChB,QAAQ,GAAG,CAAC;QACZ,yDAAO,IAAI,GAAG,IAAI,qJAAI,CAAC;IACzB;IACA,OAAO,yDAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/Personal%20Expense%20Analyzer/src/pages/api/auth/register.js"],"sourcesContent":["import pool from '../../../lib/db';\r\nimport bcrypt from 'bcryptjs';\r\n\r\nexport default async function handler(req, res) {\r\n    if (req.method !== 'POST') {\r\n        return res.status(405).json({ message: 'Method not allowed' });\r\n    }\r\n\r\n    try {\r\n        const { username, email, password } = req.body;\r\n\r\n        if (!username || !email || !password) {\r\n            return res.status(400).json({ error: 'Missing required fields' });\r\n        }\r\n\r\n        const userExist = await pool.query('SELECT * FROM users WHERE email = $1', [email]);\r\n        if (userExist.rows.length > 0) {\r\n            return res.status(400).json({ error: 'User already exists' });\r\n        }\r\n\r\n        const salt = await bcrypt.genSalt(10);\r\n        const hashedPassword = await bcrypt.hash(password, salt);\r\n\r\n        const newUser = await pool.query(\r\n            'INSERT INTO users (username, email, password_hash) VALUES ($1, $2, $3) RETURNING id, username, email',\r\n            [username, email, hashedPassword]\r\n        );\r\n\r\n        res.status(201).json(newUser.rows[0]);\r\n\r\n    } catch (err) {\r\n        console.error(err.message);\r\n        res.status(500).json({ error: 'Server Error' });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC1C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACvB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAqB;IAChE;IAEA,IAAI;QACA,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;QAE9C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU;YAClC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAA0B;QACnE;QAEA,MAAM,YAAY,MAAM,oHAAI,CAAC,KAAK,CAAC,wCAAwC;YAAC;SAAM;QAClF,IAAI,UAAU,IAAI,CAAC,MAAM,GAAG,GAAG;YAC3B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAsB;QAC/D;QAEA,MAAM,OAAO,MAAM,0KAAM,CAAC,OAAO,CAAC;QAClC,MAAM,iBAAiB,MAAM,0KAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,MAAM,UAAU,MAAM,oHAAI,CAAC,KAAK,CAC5B,wGACA;YAAC;YAAU;YAAO;SAAe;QAGrC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;IAExC,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,IAAI,OAAO;QACzB,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAe;IACjD;AACJ"}}]
}